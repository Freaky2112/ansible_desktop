- name: users | lesbian | create group
  tags: groups,lesbian,users
  group:
    name: lesbian
    state: present

  - name: add sudoers file for User
    tags: always
    copy:
      src: sudoer_lesbian
      dest: /etc/sudoers.d/lesbian
      owner: root
      group: root
      mode: 0440

- name: users | lesbian | create user
  tags: lesbian,sudo,users
  user:
    name: lesbian
    group: lesbian
    groups: ansible,{{ sudo_group }}
    state: present
    comment: "ansible User"
    
- name: users | lesbian | add sudoers file
  tags: settings,lesbian,sudo,system,users
  copy:
    src: users/sudoers_lesbian
    dest: /etc/sudoers.d/lesbian
    owner: root
    group: root
    mode: 0440


- name: users | lesbian | create .ssh directory
  tags: dotfiles,lesbian,ssh,users
  file:
    path: "{{ item.dir }}"
    state: directory
    owner: lesbian
    group: lesbian
    mode: 0700
  with_items:
    - { dir: '/home/lesbian/.ssh' }


- name: users | lesbian | add public key
  tags: dotfiles,lesbian,ssh,ssh-keys,users
  authorized_key:
    user: lesbian
    key: "{{ item }}"
  with_file:
    - users/lesbian/ssh/ansible_ed25519.pub


